{"version":3,"sources":["wbapp.js"],"names":["wbapp","Object","_tmpphp","_tmpjq","setTimeout","loader","document","getElementById","delay","get_cookie","name","value","cookie","parts","split","length","pop","shift","devmode","evClick","start","str_replace","loadPhpjs","$","loadJquery","data","bind","ui","spinner_sm","spinner_sm_grow","session","settings","loadScripts","Ractive","DEBUG","eventsInit","wbappScripts","tplInit","ajaxAuto","lazyload","modalsInit","scrollTop","fn","disableSelection","attr","css","on","verify","form","res","idx","find","each","is","label","undefined","prev","text","next","parents","val","check_email","prop","_settings","sysmsg","email_correct","console","trigger","required","ucfirst","fld","pcheck","check","pass_match","min","minstr","min_val","max","maxstr","max_val","minlen","lenstr","strlen","min_length","html","outer","s","before","remove","jQuery","append","eq","clone","runScripts","type","eval","serializeJson","removeAttr","branch","serializeArray","i","_val","_text","in_array","json_decode","error","htmlentities","sel","multi","checked","jsonVal","strtolower","json_encode","link","createElement","rel","as","href","head","appendChild","delegate","e","tid","params","parseAttr","keys","url","id","newId","tooltip","_event","_tid","ajax","substr","location","anchor","preventDefault","search","that","waitajax","style","overflow","height","scrollHeight","func","auth","mode","dislink","addClass","enlink","removeClass","signin","post","login","redirect","reset","signup","recover","alive","result","clearInterval","storage","key","binds","getKey","list","k","localStorage","getItem","JSON","parse","assign","err","path","last","lastkey","tmpValue","entries","setItem","checkBind","template","tpl","render","target","_params","save","obj","event","method","dismiss","objByForm","_idx","table","item","field","tmpId","callback","update","dataname","checknew","_id","modal","strpos","storageUpdate","renderServer","updateInputs","done","src","xhr","XMLHttpRequest","open","onload","responseText","send","script","hash","md5","push","checkJson","queryString","trim","parse_str","is_string","_session","token","__token","loading","then","unloading","get","fail","opts","request_type","_removed","rend","formdata","formflds","closest","filter","count","source","prepend","replace","replaceWith","_trigger","renderClient","parent","children","pagert","pos","pag","after","showmod","clearval","v","tk","tv","page","pages","route","uri","store","_renamed","topbar","hide","show","fetch","selector","ret","tpl_id","urldecode","_form","_item","is_object","param","base64_encode","stringify","postSync","toast","title","options","getTpl","$tpl","bgcolor","txcolor","el","age","off","currentTarget","formByObj","clear","prms","array_merge","profileMenu","getForm","locale","loc","inner","newbind","from","pagination","set","separator","prefix","mt","explode","microtime","md","str_repeat","dechex","ceil","time","rand","modalZndx","undelegate","toggleClass","modalDelegates","appendTo","draggable","handle","containment","window","dispatchEvent","Event","zndx","hasClass","getModal","content","ajaxSync","ajaxObjs","ajaxCount","getSync","async","log","scripts","loadedScripts","ready","stop","forEach","indexOf","loadStyles","styles","loadedStyles","loadPreload","preloads","preload_max","preload_count","preload_check","furl","str","transilt","word","answer","a","email","match","array_column","column","indice","setInterval","init","print","pid","divToPrint","newWin","write","innerHTML","close","is_callable","t","n","o","r","Array","constructor","phpjs","defer","jquery"],"mappings":"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","sourcesContent":["\"use strict\"\nvar wbapp = new Object();\nvar _tmpphp = false;\nvar _tmpjq = false;\n\nsetTimeout(function(){\n    wbapp.loader = true;\n    let loader = document.getElementById(\"loader\");\n    typeof(loader) != 'undefined' && loader != null ? wbapp.delay = 2500 : wbapp.delay = 10;\n\n    var get_cookie = function (name) {\n        const value = `; ${document.cookie}`;\n        const parts = value.split(`; ${name}=`);\n        if (parts.length === 2) return parts.pop().split(';').shift();\n    }\n\n    wbapp.devmode = get_cookie('devmode');\n    wbapp.evClick = 'tap click touchstart';\n\n\n    wbapp.start();\n},10);\n\nwbapp.start = function () {\n    if (typeof str_replace === 'undefined') {\n        loadPhpjs();\n        return;\n    }\n    if (typeof $ === 'undefined') {\n        loadJquery();\n        return;\n    }\n    var data = {};\n    wbapp.bind = {};\n    wbapp.ui = {\n        spinner_sm: '<span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>',\n        spinner_sm_grow: '<span class=\"spinner-grow spinner-grow-sm\" role=\"status\"></span>'\n    };\n    wbapp.session();\n    wbapp.settings();\n\n    setTimeout(function () {\n        wbapp.loadScripts([\n            //                , `/engine/js/jquery-migrate.min.js`\n            `/engine/js/jquery-ui.min.js` // для modal draggable - нужно подумать куда перенести\n            , `/engine/js/jquery.tap.js`\n            , `/engine/js/ractive.js`\n            , `/engine/js/topbar.min.js`\n            , `/engine/js/lazyload.js`\n        ], \"wbapp-go\",function () {\n            Ractive.DEBUG = false;\n            wbapp.eventsInit();\n            wbapp.wbappScripts();\n            wbapp.tplInit();\n            wbapp.ajaxAuto();\n            wbapp.lazyload();\n            wbapp.modalsInit();\n            $(document).scrollTop(0);\n        });\n    }, wbapp.delay);\n\n    $.fn.disableSelection = function() {\n        return this\n                 .attr('unselectable', 'on')\n                 .css('user-select', 'none')\n                 .on('selectstart', false);\n    };\n\n\n    $.fn.verify = function () {\n        var form = this;\n        var res = true;\n        var idx = 0;\n        $(form).find(\"[required],[minlength],[min],[max],[name=password],[type=email]\").each(function () {\n            if ($(this).is('[name=password_check],[name=password-confirm]')) return;\n            idx++;\n            var label = $(this).attr(\"data-label\");\n    \n            if (label == undefined || label == \"\") label = $(this).prev(\"label\").text();\n            if (label == undefined || label == \"\") label = $(this).next(\"label\").text();\n            if ((label == undefined || label == \"\") && $(this).attr(\"id\") !== undefined) label = $(this).parents(\"form\").find(\"label[for=\" + $(this).attr(\"id\") + \"]\").text();\n            if (label == undefined || label == \"\") label = $(this).parents(\".form-group\").find(\"label\").text();\n            if (label == undefined || label == \"\") label = $(this).attr(\"placeholder\");\n            if (label == undefined || label == \"\") label = $(this).attr(\"name\");\n    \n            $(this).data(\"idx\", idx);\n    \n            if ($(this).is('[type=email]')) {\n                if (($(this).val() > '' && !wbapp.check_email($(this).val())) || ($(this).val() == '' && $(this).prop('required'))) {\n                    res = false;\n                    $(this).data(\"error\", wbapp._settings.sysmsg.email_correct);\n                    wbapp.console(\"trigger: wb-verify-false [\" + $(this).attr(\"name\") + \"]\");\n                    $(form).trigger(\"wb-verify-false\", [this, $(this).data(\"error\")]);\n                } else {\n                    wbapp.console(\"trigger: wb-verify-true [\" + $(this).attr(\"name\") + \"]\");\n                    $(form).trigger(\"wb-verify-true\", [this]);\n                }\n            } else if ($(this).is(\"[required]:not(select)\") && $(this).val() == \"\") {\n                res = false;\n                $(this).data(\"error\", wbapp._settings.sysmsg.required + ucfirst(label));\n                wbapp.console(\"trigger: wb-verify-false [\" + $(this).attr(\"name\") + \"]\");\n                $(form).trigger(\"wb-verify-false\", [this, $(this).data(\"error\")]);\n            } else if ($(this).is(\":not([disabled],[readonly],[min],[max],[maxlength],[type=checkbox])\")) {\n                if ($(this).val() == \"\") {\n                    res = false;\n                    wbapp.console(\"trigger: wb-verify-false [\" + $(this).attr(\"name\") + \"]\");\n                    $(form).trigger(\"wb-verify-false\", [this]);\n                } else {\n    \n                    wbapp.console(\"trigger: wb-verify-true [\" + $(this).attr(\"name\") + \"]\");\n                    $(form).trigger(\"wb-verify-true\", [this]);\n    \n                }\n            }\n            if ($(this).is(\"[required][type=checkbox]:not(:checked)\")) {\n                res = false;\n                $(this).data(\"error\", wbapp._settings.sysmsg.required + ucfirst(label));\n                wbapp.console(\"trigger: wb-verify-false [\" + $(this).attr(\"name\") + \"]\");\n                $(form).trigger(\"wb-verify-false\", [this, $(this).data(\"error\")]);\n            }\n            if ($(this).is(\"[type=radio]\") && $(this).is(\":not(:checked)\")) {\n                res = false;\n                var fld = $(this).attr(\"name\");\n                if (fld > \"\") {\n                    $(\"[type=radio][name='\" + fld + \"']\").each(function () {\n                        if ($(this).is(\":checked\")) {\n                            res = true;\n                        }\n                    });\n                }\n                if (!res) {\n                    wbapp.console(\"trigger: wb-verify-false [\" + $(this).attr(\"name\") + \"]\");\n                    $(form).trigger(\"wb-verify-false\", [this]);\n                }\n            }\n            if ($(this).is(\"[name=password]\")) {\n                if ($(form).find($(this).attr(\"name\") + \"_check\").length) {\n                    var pcheck = $(this).attr(\"name\") + \"_check\";\n                } else {\n                    var pcheck = $(this).attr(\"name\") + \"-confirm\";\n                }\n                let check = $(form).find(\"input[name=\" + pcheck + \"]\");\n    \n                if (check.length) {\n                    if ($(this).val() !== $(check).val()) {\n                        res = false;\n    \n                        $(this).data(\"error\", wbapp._settings.sysmsg.pass_match);\n                        wbapp.console(\"trigger: wb-verify-false [\" + $(this).attr(\"name\") + \"]\");\n                        $(form).trigger(\"wb-verify-false\", [this, $(this).data(\"error\")]);\n                        $(form).trigger(\"wb-verify-false\", [check, $(check).data(\"error\")]);\n                    } else {\n                        $(form).trigger(\"wb-verify-true\", [check]);\n                    }\n                }\n            }\n            if ($(this).is(\"[min]:not([readonly],[disabled])\") && $(this).val() > \"\") {\n                let min = $(this).attr(\"min\") * 1;\n                let minstr = $(this).val() * 1;\n                if (minstr < min) {\n                    res = false;\n                    $(this).data(\"error\", ucfirst(label) + \" \" + wbapp._settings.sysmsg.min_val + \": \" + min);\n                    wbapp.console(\"trigger: wb-verify-false [\" + $(this).attr(\"name\") + \"]\");\n                    $(form).trigger(\"wb-verify-false\", [this, $(this).data(\"error\")]);\n                }\n            }\n    \n            if ($(this).is(\"[max]:not([readonly],[disabled])\") && $(this).val() > \"\") {\n                let max = $(this).attr(\"max\") * 1;\n                let maxstr = $(this).val() * 1;\n                if (maxstr > max) {\n                    res = false;\n                    $(this).data(\"error\", ucfirst(label) + \" \" + wbapp._settings.sysmsg.max_val + \": \" + max);\n                    wbapp.console(\"trigger: wb-verify-false [\" + $(this).attr(\"name\") + \"]\");\n                    $(form).trigger(\"wb-verify-false\", [this, $(this).data(\"error\")]);\n                }\n            }\n    \n            if ($(this).is(\"[minlength]:not([readonly],[disabled])\") && $(this).val() > \"\") {\n                let minlen = $(this).attr(\"minlength\") * 1;\n                let lenstr = strlen($(this).val());\n                if (lenstr < minlen) {\n                    res = false;\n                    $(this).data(\"error\", ucfirst(label) + \" \" + wbapp._settings.sysmsg.min_length + \": \" + minlen);\n                    wbapp.console(\"trigger: wb-verify-false [\" + $(this).attr(\"name\") + \"]\");\n                    $(form).trigger(\"wb-verify-false\", [this, $(this).data(\"error\")]);\n                }\n            }\n    \n            if ($(this).is('select[required]')) {\n                let val = $(this).find('option:selected').attr('value');\n                if (val == undefined || val == '') {\n                    res = false;\n                    $(this).data(\"error\", wbapp._settings.sysmsg.required + ucfirst(label));\n                    wbapp.console(\"trigger: wb-verify-false [\" + $(this).attr(\"name\") + \"]\");\n                    $(form).trigger(\"wb-verify-false\", [this, $(this).data(\"error\")]);\n                }\n            }\n    \n    \n            if ($(this).is(\"button\")) {\n                if (\n                    ($(this).attr(\"value\") !== undefined && $(this).val() == \"\") ||\n                    ($(this).attr(\"value\") == undefined && $(this).html() == \"\")\n                ) {\n                    res = false;\n                }\n            }\n    \n    \n        });\n        if (res == true) {\n            wbapp.trigger('wb-verify-success', form, [form]);\n        }\n        if (res == false) {\n            wbapp.trigger('wb-verify-fail', form, [form]);\n        }\n        return res;\n    }\n    \n    $.fn.outer = function (s) {\n        return s ? this.before(s).remove() : jQuery(\"<p>\").append(this.eq(0).clone()).html();\n    };\n    \n    $.fn.runScripts = function () {\n        $(this).find(\"script\").each(function () {\n            var type = $(this).attr(\"type\");\n            if (type !== \"text/locale\" && type !== \"text/template\") {\n                eval($(this).text());\n                if ($(this).attr(\"removable\") !== undefined) $(this).remove();\n            }\n        });\n    }\n    \n    $.fn.serializeJson = function (data = {}) {\n        var form = this;\n        $(form).find(\"form [name], .wb-unsaved[name], .wb-tree-item [name]\").each(function () {\n            $(this).attr(\"wb-tmp-name\", $(this).attr(\"name\"));\n            $(this).removeAttr(\"name\");\n        });\n        var branch = $(form).serializeArray();\n    \n        $(branch).each(function (i, val) {\n            data[val[\"name\"]] = val[\"value\"];\n            if ($(form).find(\"textarea[type=json][name='\" + val[\"name\"] + \"']\").length) {\n                let _val = $(form).find(\"textarea[type=json][name='\" + val[\"name\"] + \"']\").val();\n                let _text = $(form).find(\"textarea[type=json][name='\" + val[\"name\"] + \"']\").text();\n    \n                _val == 'null' ? data[val[\"name\"]] = _text : data[val[\"name\"]] = _val;\n    \n                if (in_array(data[val[\"name\"]], ['null', '', '{}', '[]'])) {\n                    data[val[\"name\"]] = '';\n                } else {\n                    try {\n                        data[val[\"name\"]] = json_decode(data[val[\"name\"]]);\n                    } catch (error) {\n                        wbapp.console('Unknown error!');\n                    }\n    \n                }\n            } else if ($(form).find(\"textarea[name='\" + val[\"name\"] + \"']\").length) {\n                if ($(form).parents(\".treeData\").length) {\n                    data[val[\"name\"]] = htmlentities(data[val[\"name\"]]);\n                    data[val[\"name\"]] = str_replace('&quot;', '/\"', data[val[\"name\"]]);\n                    data[val[\"name\"]] = str_replace('&amp;quot;', '\"', data[val[\"name\"]]);\n                } else {\n                    let value = $(form).find(\"textarea[name='\" + val[\"name\"] + \"']\").val();\n                    let text = $(form).find(\"textarea[name='\" + val[\"name\"] + \"']\").text();\n                    if (value == 'null') {\n                        data[val[\"name\"]] = text;\n                    } else { data[val[\"name\"]] = value; }\n                }\n    \n            }\n        });\n\n        let sel = $(form).find('select[name]:not([multiple])');\n        $.each(sel, function () {\n            data[this.name] = $(this).val();\n        });\n\n        let multi = $(form).find('select[name][multiple]');\n        $.each(multi, function () {\n            data[this.name] = $(this).val();\n        });\n    \n        var check = $(form).find('input[name][type=checkbox]');\n        // fix unchecked values\n        $.each(check, function () {\n            data[this.name] = \"\";\n            if (this.checked) data[this.name] = \"on\";\n        });\n    \n        var check = $(form).find('input[name][type=radio]');\n        // fix unchecked values\n        $.each(check, function () {\n            if (this.checked) data[this.name] = $(this).attr('value');\n        });\n    \n        $(form).find(\"form [wb-tmp-name], .wb-unsaved [wb-tmp-name], .wb-tree-item [wb-tmp-name]\").each(function () {\n            $(this).attr(\"name\", $(this).attr(\"wb-tmp-name\"));\n            $(this).removeAttr(\"wb-tmp-name\");\n        });\n        return data;\n    }\n    \n    $.fn.jsonVal = function (data = undefined) {\n        if (strtolower($(this).attr(\"type\")) !== \"json\") {\n            return $(this).val();\n        }\n        if (data == undefined) {\n            data = $(this).val();\n            try {\n                data = json_decode(data);\n            } catch (error) {\n                data = {};\n            }\n            return data;\n        } else {\n            if (data == \"\") {\n                data = {};\n            } else {\n                data = json_encode(data);\n            }\n            if ($(this).is(\"textarea\")) $(this).html(data);\n            $(this).val(data).trigger(\"change\");\n        }\n    }\n\n}\n\n\n\n    wbapp.lazyload = function () {\n        $(\"[data-src]:not([src])\").each(function(){\n            let link = document.createElement('link');\n            link.rel = \"preload\";\n            link.as = \"image\";\n            link.href = $(this).attr('data-src');\n            document.head.appendChild(link);\n        });\n        $(\"[data-src]:not([src])\").lazyload();\n    }\n\n    wbapp.eventsInit = function () {\n        $(document).delegate(\"[data-ajax]:not(input,select)\", \"click\", function (e, tid) {\n            if (!$(this).is(\"input,select\")) {\n                let params = wbapp.parseAttr($(this).attr(\"data-ajax\"));\n                if (Object.keys(params)[0] == $(this).attr(\"data-ajax\")) {\n                    // ajax string only\n                    params.url = $(this).attr(\"data-ajax\");\n                    if ($(this).parents('form').length) {\n                        let id = wbapp.newId('_', 'ax');\n                        if ($(this).parents('form').attr('id') == undefined) {\n                            $(this).parents('form').attr('id', id);\n                        }\n                        params.form = 'form#' + $(this).parents('form').attr('id');\n                        if (!$(params.form).verify()) {\n                            return false;\n                        }\n                    }\n                }\n                if ($(this).is('[data-toggle=tooltip]')) { $(this).tooltip('hide'); } // fix tooltips\n                params._event = e;\n                if (tid !== undefined) params._tid = tid;\n                wbapp.ajax(params);\n                wbapp.console(\"Trigger: data-ajax\");\n                $(document).trigger(\"data-ajax\", params);\n                let href = $(this).attr('href');\n                if (href !== undefined && href.substr(0, 1) == '#') {\n                    document.location.anchor = $(this).attr('href');\n                }\n            }\n        })\n\n        $(document).delegate(\"input[data-ajax],select[data-ajax]\", \"change\", function (e, tid) {\n            e.preventDefault();\n            let search = $(this).attr(\"data-ajax\");\n            search = str_replace('$value', $(this).val(), search);\n            let params = wbapp.parseAttr(search);\n            params._event = e;\n            if (tid !== undefined) params._tid = tid;\n            wbapp.ajax(params);\n            return false;\n        })\n\n        $(document).delegate(\"input[type=search][data-ajax]\", \"keyup\", function () {\n            var minlen = 0;\n            var that = this;\n            var val = $(this).val();\n            that.waitajax = false;\n            if ($(this).attr(\"minlength\")) minlen = $(this).attr(\"minlength\") * 1;\n            if (that.waitajax == false && val.length >= minlen) {\n                that.waitajax = true;\n                $(this).trigger(\"change\");\n                setTimeout(function () {\n                    that.waitajax = false;\n                }, 500);\n            }\n        })\n\n        $(document).delegate(\"input[type=checkbox]\", \"click\", function () {\n            if ($(this).prop(\"checked\") == false) {\n                $(this).removeAttr(\"checked\");\n            } else {\n                $(this).prop(\"checked\", true);\n                $(this).attr(\"checked\", true);\n            }\n        });\n\n        $(document).delegate(\"[rows=auto]\", \"keydown keyup focus\", function () {\n            this.style.overflow = \"hidden\";\n            this.style.height = \"1px\";\n            this.style.height = (this.scrollHeight) + \"px\";\n        });\n\n        $(document).delegate(\"[rows=auto]\", \"focusout\", function () {\n            this.style.overflow = \"hidden\";\n            this.style.height = \"auto\";\n        });\n\n\n    }\n\n    wbapp.ajaxAuto = function (func = null) {\n        $(document).find(\"[data-ajax][auto]\").each(function () {\n            $(this).trigger(\"click\");\n            if ($(this).attr('once') !== undefined) $(this).removeAttr('data-ajax').removeAttr('once');\n            $(this).removeAttr(\"auto\");\n        });\n    }\n\n    wbapp.auth = function (form, mode = 'signin') {\n        if (!$(form).verify()) return;\n        let data = $(form).serializeJson();\n\n        let dislink = function () {\n            $(form).find('a:not([disabled]),button:not([disabled]),[data-ajax]:not([disabled])').addClass('wb-auth-disabled').attr('disabled', true);\n            $(form).addClass('cursor-wait');\n        }\n\n        let enlink = function () {\n            $(form).find('.wb-auth-disabled').removeClass('wb-auth-disabled').removeAttr('disabled');\n            $(form).removeClass('cursor-wait');\n        }\n\n        let signin = function () {\n            if ($(form).attr(\"action\") !== undefined) var url = $(form).attr(\"action\"); else var url = \"/api/auth/email\";\n            wbapp.post(url, data, function (res) {\n                if (res.login) {\n                    wbapp.console(\"Trigger: wb-signin-success\");\n                    $(document).trigger('wb-signin-success');\n                    if (res.redirect) document.location.href = res.redirect;\n                } else {\n                    wbapp.console(\"Trigger: wb-signin-error\");\n                    $(document).trigger('wb-signin-error');\n                    $(form).find('.is-valid').removeClass('is-valid');\n                    $(form)[0].reset();\n                    $(form).find('.signin-error').removeClass('d-none');\n                }\n                enlink();\n            });\n        }\n\n        let signup = function () {\n            if ($(form).attr(\"action\") !== undefined) var url = $(form).attr(\"action\"); else var url = \"/api/auth/signup\";\n            wbapp.post(url, data, function (res) {\n                if (res.signup) {\n                    wbapp.console(\"Trigger: wb-signup-success\");\n                    $(document).trigger('wb-signup-success');\n                    $(form).find('.signup-success').removeClass('d-none');\n                    $(form).find(\".signup-error, .signup-form\").remove();\n                    if (res.redirect) document.location.href = res.redirect;\n                } else {\n                    $(form).find('.is-valid').removeClass('is-valid');\n                    wbapp.console(\"Trigger: wb-signup-error\");\n                    $(document).trigger('wb-signup-error');\n                    $(form).find('.signup-error').removeClass('d-none');\n                }\n                enlink();\n            });\n        }\n\n        let recover = function () {\n            if ($(form).attr(\"action\") !== undefined) var url = $(form).attr(\"action\"); else var url = \"/api/auth/recover\";\n            data.text = json_encode($(form).find('.recover-text').html());\n\n            wbapp.post(url, data, function (res) {\n                if (res.recover) {\n                    wbapp.console(\"Trigger: wb-signrc-success\");\n                    $(document).trigger('wb-signrc-success');\n                    $(form).find(\".recover-success\").removeClass('d-none');\n                    $(form).find(\".recover-error, .recover-form\").remove();\n                } else {\n                    $(form).find('.is-valid').removeClass('is-valid');\n                    wbapp.console(\"Trigger: wb-signrc-error\");\n                    $(document).trigger('wb-signrc-error');\n                    $(form).find(\".recover-error\").removeClass('d-none');\n                }\n                enlink();\n            });\n        }\n\n        dislink();\n\n        eval(mode)();\n    }\n\n    wbapp.alive = function () {\n        $.post(\"/ajax/alive\", {}, function (data) {\n            if (data.result == false || data.result == undefined) {\n                wbapp.console(\"Trigger: session_close\");\n                $(document).trigger(\"session_close\");\n                clearInterval(alive);\n            }\n        });\n    }\n\n    wbapp.storage = function (key, value = undefined, binds = true) {\n        function getKey(list) {\n            key = \"\";\n            $(list).each(function (i, k) {\n                if (k.substr(0, 1) * 1 > -1) {\n                    key += `['${k}']`\n                } else {\n                    if (i > 0) key += '.'\n                    key += k\n                }\n            })\n            return key\n        }\n\n        if (value === undefined) {\n            // get data\n            let list = key.split(\".\");\n            var res;\n            var data = localStorage.getItem(list[0]);\n            if (data !== null) data = JSON.parse(data);\n            if (list.length) {\n                key = getKey(list);\n                try {\n                    eval(`res = data.${key}`);\n                    if (typeof res == 'object') res = Object.assign({}, res);\n                    return res;\n                } catch (err) {\n                    return undefined\n                }\n            }\n            return data;\n        } else {\n            // set data\n            var path, branch, type;\n            var list = key.split(\".\");\n            var last = list.length;\n            var lastkey = list[last - 1];\n            $(list).each(function (i, k) {\n                if (i == 0) {\n                    key = k;\n                    data = localStorage.getItem(key);\n                    if (i + 1 !== last && data == null) {\n                        data = {}\n                    } else {\n                        try {\n                            data = JSON.parse(data);\n                        } catch (err) {\n                            data = {}\n                        }\n                    }\n                } else {\n                    if (k.substr(0, 1) * 1 > -1) {\n                        key += `['${k}']`\n                    } else {\n                        if (i > 0) key += '.'\n                        key += k\n                    }\n                }\n                try {\n                    eval(`branch = data.${key}`);\n                    if (typeof branch == 'object') branch = Object.assign({}, branch);\n                    if (i + 1 < last && typeof branch !== \"object\") eval(`data.${key} = {}`);\n                } catch (err) {\n                    eval(`data.${key} = {}`);\n                }\n            })\n            var tmpValue = value;\n            if (value === null) {\n                eval(`delete data.${key}`);\n            } else if (value !== {}) {\n                if (typeof value == 'string') {\n                    eval(`data.${key} = value`);    \n                } else {\n                    eval(`tmpValue = Object.assign({}, value)`);\n                    Object.entries(tmpValue).length == 0 ? null : value = tmpValue;\n                    if (typeof value == 'object') value = Object.assign({}, value);\n                    eval(`data.${key} = value`);\n                }\n            }\n            localStorage.setItem(list[0], json_encode(data));\n\n            let checkBind = function (bind, key) {\n                if (bind == key) return true;\n                if (key.substr(0, bind.length) == bind) return true;\n                return false;\n            }\n\n            if (binds == true) {\n                $.each(wbapp.template, function (i, tpl) {\n                    if (tpl.params.bind !== undefined && checkBind(tpl.params.bind, key) &&\n                        tpl.params.render !== undefined && tpl.params.render == 'client') {\n                        wbapp.render(tpl.params.target);\n                    } else if (tpl.params._params !== undefined && tpl.params._params.bind !== undefined\n                        && checkBind(tpl.params._params.bind, key) && tpl.params.render == 'server') {\n                        wbapp.render(tpl.params.target);\n                    }\n                });\n                $(document).trigger(\"bind\", { key: key, data: value });\n                $(document).trigger(\"bind-\" + key, value);\n                wbapp.console(\"Trigger: bind [\" + key + \"]\");\n            }\n            return data;\n        }\n    }\n\n    wbapp.save = function (obj, params, event) {\n        wbapp.console(\"Trigger: wb-save-start\");\n        $(obj).trigger(\"wb-save-start\", params);\n        let that = this;\n        let data, form, result;\n        let method = \"POST\";\n        if (params.form !== undefined) {\n            form = $(params.form);\n        } else {\n            form = $(obj).parents(\"form\");\n        }\n\n        if ($(form).length && !$(form).verify()) {\n            $(obj).trigger(\"wb-save-error\", {\n                params: params\n            });\n            return false;\n        }\n\n        if ($(form).attr(\"method\") !== undefined) method = $(form).attr(\"method\");\n        if ($(form).parents('.modal.saveclose').length) {\n            params.dismiss = $(form).parents('.modal.saveclose').attr('id');\n        }\n\n        setTimeout(function () {\n            // Задержка для ожидания обработки возможных плагинов\n            data = wbapp.objByForm(form);\n            if (data._idx) delete data._idx;\n\n            //if ($(obj).is(\"input,select,textarea,button,img,a\") && params.table && (params.id || params.item)) {\n            if (params.table && (params.id || params.item)) {\n                let fld = $(obj).attr(\"name\");\n                let value = $(obj).val();\n                let id;\n                if (params.field == undefined && fld > '') params.field = fld;\n                if ($(obj).is(\":checkbox\") && $(obj).prop(\"checked\")) value = \"on\";\n                if ($(obj).is(\":checkbox\") && !$(obj).prop(\"checked\")) value = \"\";\n\n                if (params.id) {\n                    id = params.id;\n                } else if (params.item) id = params.item;\n\n                if (data.id !== undefined && data.id > '') id = data.id;\n\n                if (fld !== undefined) {\n                    data = {};\n                    data['id'] = id;\n                    eval(`data.${fld} = value;`);\n                } else {\n                    let tmpId = 'tmp.' + wbapp.newId();\n                    wbapp.storage(tmpId, {\n                        'id': id\n                    }, false);\n                    if (params.field !== undefined) {\n                        wbapp.storage(tmpId + '.' + params.field, data, false);\n                    } else {\n                        data['id'] = id;\n                        wbapp.storage(tmpId, data, false);\n                    }\n                    data = wbapp.storage(tmpId);\n                    wbapp.storage(tmpId, null);\n                }\n                data['id'] = id;\n\n\n                if (params.url == undefined) params.url = `/api/save/${params.table}`;\n            } else if (params.field !== undefined) {\n                wbapp.storage('tmp' + '.' + params.table + '.' + params.field, data, false);\n                data = wbapp.storage('tmp' + '.' + params.table);\n            }\n            if ($(obj).data('saved-id') !== undefined) {\n                data['id'] = $(obj).data('saved-id');\n            }\n\n            wbapp.post(params.url, data, function (data) {\n                if (data.error == true) {\n                    $(obj).trigger(\"wb-save-error\", {\n                        params: params,\n                        data: data,\n                    });\n                    return null;\n                }\n\n\n                if (params.callback) eval('params = ' + params.callback + '(params,data)');\n\n                if (params.data && params.error !== true) {\n                    var update = [];\n                    var dataname;\n                    $.each(data, function (key, value) {\n                        update[key] = value\n                    });\n                    eval('var checknew = (typeof ' + params.data + ');');\n                    if (checknew == \"undefined\") {\n                        eval(`dataname = str_replace(\"['` + data._id + `']\",\"\",\"` + params.data + `\");`);\n                        eval(dataname + '.push(update)');\n                    } else {\n                        eval(params.data + ' = update;');\n                    }\n                }\n\n                if (params.dismiss && params.error !== true) $(\"#\" + params.dismiss).modal(\"hide\");\n                wbapp.console('Update by tpl');\n                $.each(wbapp.template, function (i, tpl) {\n                    if (tpl.params.render == undefined || tpl.params.render !== 'client') tpl.params.render = 'server';\n                    if (tpl.params.render == 'client') {\n                        // client-side update\n                        if (tpl.params._params && tpl.params._params.bind) tpl.params = tpl.params._params;\n                        if (tpl.params.bind && (tpl.params.bind == params.bind || strpos(' ' + tpl.params.bind, params.update)) == 1) {\n                            if (params.bind) wbapp.storage(params.bind, data);\n                            if (params.update) wbapp.storageUpdate(params.update, data);\n                        }\n                    } else {\n                        // server-side update\n                        if (tpl.params.bind !== undefined) tpl.params.update = tpl.params.bind;\n                        wbapp.renderServer(tpl.params, data);\n                    }\n                })\n\n\n                if (data._id !== undefined) $(obj).data('saved-id', data._id);\n\n                wbapp.console(\"Trigger: wb-save-done\");\n                $(obj).trigger(\"wb-save-done\", {\n                    params: params,\n                    data: data,\n                });\n\n            });\n        }, 50);\n    }\n\n\n    wbapp.updateInputs = function () {\n        $(document).find(\":checkbox\").each(function () {\n            if ($(this).attr(\"value\") == \"on\") {\n                $(this).attr(\"checked\", true).prop(\"checked\", true);\n            } else {\n                $(this).attr(\"checked\", false).prop(\"checked\", false);\n            }\n        })\n    }\n\n    wbapp.wbappScripts = function () {\n        var done = [];\n        $(document).find(\"script[type=wbapp],script[wbapp],script[wb-app]\").each(function () {\n            if (this.done !== undefined) return;\n            this.done = true;\n            let src = null;\n            if ($(this).is('[src]')) {\n                src = $(this).attr('src');\n            } else if ($(this).is('[wbapp]')) {\n                src = $(this).attr('wbapp');\n            } else if ($(this).is('[wb-app]')) {\n                src = $(this).attr('wb-app');\n            }\n            if (src !== null && src > '') {\n                var xhr = new XMLHttpRequest();\n                xhr.open('GET', src, true);\n                xhr.onload = function () {\n                    eval(xhr.responseText);\n                };\n                xhr.send();\n            } else {\n                var script = $(this).text();\n                var hash = md5(script);\n                if (!in_array(hash, done)) {\n                    eval(script);\n                    done.push(hash);\n                }\n            }\n            if ($(this).attr(\"remove\") !== undefined) $(this).remove();\n        });\n    }\n\n    wbapp.checkJson = function (queryString) {\n        queryString = str_replace(\" \", \"\", queryString.trim());\n        if (queryString == \"{}\") return true;\n        if (queryString.substr(0, 1) == \"{\" && queryString.substr(-1) == \"}\" && strpos(queryString, \":\")) return true;\n        return false;\n    }\n\n    wbapp.parseAttr = function (queryString = null) {\n        if (queryString == null) queryString = $(this).attr(\"wb-data\");\n        queryString = str_replace(\"'\", '\"', queryString);\n        queryString = str_replace(\"&amp;\", '&', queryString);\n        var params = {};\n        if (wbapp.checkJson(queryString)) {\n            params = JSON.parse(queryString);\n        } else {\n            parse_str(queryString, params);\n        }\n        $(this).data(\"wb-data\", params);\n        return params;\n    }\n\n    wbapp.post = async function (url, data = {}, func = null) {\n        if (is_string(data)) {\n            data += '&__token=' + wbapp._session.token;\n        } else {\n            try { data.__token = wbapp._session.token; } catch (error) { null }\n        }\n        wbapp.loading();\n        $.post(url, data).then(function (data) {\n            wbapp.unloading();\n            if (func !== null) return func(data);\n        })\n    }\n\n    wbapp.get = async function (url, data = {}, func = null) {\n        if (is_string(data)) {\n            data += '&__token=' + wbapp._session.token;\n        } else {\n            try { data.__token = wbapp._session.token; } catch (error) { null }\n        }\n        wbapp.loading();\n        $.get(url, data)\n            .then(function (data) {\n                wbapp.unloading();\n                if (func !== null) return func(data);\n            })\n            .fail(function (data) {\n                wbapp.unloading();\n                if (func !== null) return func(false);\n            })\n    }\n\n    wbapp.ajax = async function (params, func = null) {\n        if (!params.url && !params.tpl && !params.target) return;\n        let opts = Object.assign({}, params);\n        let token;\n        delete opts._event;\n        if (params.request_type == 'remove_item') {\n            wbapp.post(params.url, opts, function (data) {\n                if (data._removed !== undefined && data._removed == true && params.update !== undefined) {\n                    $.each(wbapp.template, function (i, tpl) {\n                        let rend = false;\n                        if (tpl.params !== undefined && tpl.params.bind !== undefined && tpl.params.bind == params.update) rend = true;\n                        if (tpl.params !== undefined && tpl.params._params !== undefined && tpl.params._params.bind !== undefined && tpl.params._params.bind == params.update) rend = true;\n                        if (rend) wbapp.renderServer(tpl.params);\n                    });\n                }\n            });\n        } else if (params.url !== undefined) {\n            if (params.form !== undefined) {\n                params.formdata = wbapp.objByForm(params.form);\n                params.formflds = {};\n                $(params.form).find('[name]').each(function () {\n                    params.formflds[$(this).attr('name')] = $(this).attr('name');\n                    if ($(this).attr('name')) {\n                        if ($(this).attr('data-label') > '') {\n                            params.formflds[$(this).attr('name')] = $(this).attr('data-label');\n                        } else if ($(this).closest('.form-group').find('label').length) {\n                            params.formflds[$(this).attr('name')] = $(this).closest('.form-group').find('label').text();\n                        } else if ($(this).prev(\"label\").length) {\n                            params.formflds[$(this).attr('name')] = $(this).prev(\"label\").text();\n                        } else if ($(this).attr('placeholder') > '') {\n                            params.formflds[$(this).attr('name')] = $(this).attr('placeholder');\n                        }\n                    }\n                })\n            }\n            let opts = Object.assign({}, params);\n            delete opts._event;\n\n            if (opts._tid !== undefined && opts._tid > '') {\n                delete opts.data; // добавил для очистки фильтра\n                params = wbapp.tpl(opts._tid).params;\n            }\n\n            wbapp.loading();\n            if (params.filter !== undefined) opts.filter = params.filter ;\n            wbapp.post(params.url, opts, function (data) {\n                wbapp.unloading();\n                if (count(data) == 2 && data.error !== undefined && data.callback !== undefined) {\n                    eval(data.callback + '(params,data)');\n                    if (func !== null) return func(params, data);\n                }\n\n                if (params.target && params.target > '#') {\n                    if ($(data).is(params.target)) {\n                        $(document).find(params.target).html($(data).html());\n                    } else {\n                        $(document).find(params.target).html($(data).find(params.target + ':first').html());\n                    }\n                }\n                if (params.source && params.source > '') data = $(data).find(params.source).html();\n                if (params.html) $(document).find(params.html).html(data);\n                if (params.append) $(document).find(params.append).append(data);\n                if (params.prepend) $(document).find(params.prepend).prepend(data);\n                if (params.replace) $(document).find(params.replace).replaceWith(data);\n                //if (params.form) wbapp.formByObj(params.form,data);\n                if (params.render == 'client') {\n                    if (params.bind && typeof data == \"object\") wbapp.storage(params.bind, data);\n                    if (params.update && typeof data == \"object\") wbapp.storageUpdate(params.update, data);\n                }\n                if (params._trigger !== undefined && params._trigger == \"remove\") eval('delete ' + params.data); // ???\n                if (params.dismiss && params.error !== true) $(\"#\" + params.dismiss).modal(\"hide\");\n                if (params.render !== undefined && params.render == 'client') wbapp.renderClient(params, data);\n                if (params._event !== undefined && $(params._event.target).parent().is(\":input\")) {\n                    // $inp = $(params._event.target).parent();\n                    // тут нужна обработка значений на клиенте\n                }\n                if (params.render == 'client') {\n                    let res = $(data).find(params.target).html();\n                    $(document).find(params.target).html(res);\n                } else if (params.render == undefined || params.render == 'server') {\n                    if (data.html !== undefined && params.target !== undefined) {\n                        $(document).find(params.target).html(data.html);\n                    } else if (params.update !== undefined || params.update !== undefined) {\n                        $.each(wbapp.template, function (i, tpl) {\n                            if (tpl.params && tpl.params.bind && tpl.params.bind == params.update) {\n                                if (typeof tpl.params == 'object' && typeof data == 'object') wbapp.renderServer(tpl.params, data);\n                            } else if (tpl.params && tpl.params._params && tpl.params._params.bind && tpl.params._params.bind == params.update) {\n                                if (typeof tpl.params._params == 'object' && typeof data == 'object') wbapp.renderServer(tpl.params._params, data);\n                            }\n                        })\n                    }\n\n                    $(document).find(params.target).children('template').remove();\n                    $(document).find('.pagination[data-tpl=\"' + params.target + '\"]').parents('nav').remove();\n\n                    var pagert = $(document).find(params.target).parent();\n                    if ($(pagert).is('li')) pagert = $(pagert).parent();\n                    if ($(pagert).is('tbody')) pagert = $(pagert).parent();\n                    if (data.pos == 'both' || data.pos == 'top') $(pagert).before(data.pag);\n                    if (data.pos == 'both' || data.pos == 'bottom') $(pagert).after(data.pag);\n                }\n                if (params.callback !== undefined) eval(params.callback + '(params,data)');\n                wbapp.tplInit();\n                wbapp.lazyload();\n                wbapp.ajaxAuto();\n\n                //wbapp.console(\"Trigger: wb-ajax-done\");\n                if (data.result == undefined) params['data'] = data;\n                if (params.form !== undefined) {\n                    $(params.form).trigger(\"wb-ajax-done\", params);\n                } else if (params.target !== undefined) {\n                    $(params.target).trigger(\"wb-ajax-done\", params);\n                } else {\n                    $(document).trigger(\"wb-ajax-done\", params);\n                }\n                let showmod = $(document).find(\".modal.show:not(:visible)\");\n                if (showmod.length) showmod.removeClass(\"show\").modal('show');\n                if (func !== null) return func(params, data);\n            });\n        } else if (params.target !== undefined) {\n            if (wbapp.template[params.target] !== undefined) {\n                var target = wbapp.template[params.target].params;\n            }\n            if (!target) {\n                wbapp.console(\"Template not found: \" + params.target);\n                return;\n            } else {\n                target.target = params.target;\n                if (target.filter == undefined) target.filter = {};\n                if (target._params == undefined) target._params = {};\n                let clearval = null;\n                $.each(params, function (key, val) {\n                    if (key == 'filter') {\n                        if (val == 'clear') {\n                            target.filter = {};\n                        } else {\n                            target.filter = val;\n                        }\n                    }\n                    if (key == 'filter_clear') {\n                        clearval = val;\n                    }\n                    if (key == 'filter_remove' && target.filter[val] !== undefined) delete target.filter[val];\n                    if (key == 'filter_add') {\n                        $.each(val, function (k, v) {\n                            target.filter[k] = v;\n                        })\n                    }\n                });\n                if (clearval !== null) {\n                    $(clearval).each(function (k, v) {\n                        $(target.filter).each(function (tk, tv) {\n                            json_encode(tv) == json_encode(v) ? target.filter = {} : null;\n                        })\n                    })\n                }\n                if (target._params && target._params.page !== undefined) target._params.page = 1\n                if (target._params && target._params.pages !== undefined) delete target._params.pages\n                if (target._params && target._params.count !== undefined) delete target._params.count\n                if (target.tpl !== undefined) target._params.tpl = target.tpl;\n                if (target._tid == undefined) target._tid = params.target; // чтобы срабатывал вариант ответа с json\n                if (target.url == undefined && target.route !== undefined && target.route.uri !== undefined) target.url = target.route.uri;\n                wbapp.ajax(target, func);\n            }\n        }\n    }\n\n    wbapp.storageUpdate = function (key, data) {\n\n        var store = wbapp.storage(key);\n        if (!store) wbapp.storage(key, {});\n\n        if (store._id == undefined && (store.result !== undefined || store.params !== undefined) && data !== null && data._id !== undefined) {\n            if (data._removed !== undefined && data._removed == true) {\n                if (store.params !== undefined && store.params.render == 'server') {\n                    wbapp.renderServer(store.params);\n                } else {\n                    try {\n                        delete store.result[data._id]\n                    } catch (err) {\n                        wbapp.console('Not removed');\n                    }\n                }\n            } else if (data._renamed !== undefined && data._renamed == true) {\n                /// rename\n            } else {\n                try {\n                    store.result[data._id] = data\n                } catch (err) { }\n            }\n            wbapp.storage(key, store);\n        } else {\n            wbapp.storage(key, data);\n        }\n    }\n\n\n    wbapp.loading = function () {\n        if (wbapp.loader !== true) return;\n        $(document).find('body').addClass('loading');\n        if (typeof topbar !== 'undefined') {\n            topbar.hide();\n            topbar.show();\n        }\n    }\n\n    wbapp.unloading = function () {\n        if (wbapp.loader !== true) return;\n        $(document).find('body').removeClass('loading');\n        if (typeof topbar !== 'undefined') {\n            topbar.hide();\n        }\n\n        wbapp.fetch = function (selector, data, ret) {\n            if (selector == undefined) {\n                var selector = \"body\";\n            }\n            if (data == undefined) {\n                var data = {};\n            }\n            if ($(selector).length) {\n                var tpl_id = $(selector).attr(\"data-wb-tpl\");\n                if (tpl_id !== undefined) {\n                    var html = urldecode($(\"#\" + tpl_id).html());\n                } else {\n                    if ($(selector).is(\"script\")) {\n                        var html = $(selector).html();\n                    } else {\n                        if ($(selector).length == 1) {\n                            var html = $(selector).outer();\n                        } else {\n                            var html = selector;\n                        }\n                    }\n                }\n            } else {\n                var html = selector;\n            }\n            var form = \"undefined\";\n            var item = \"undefined\";\n            if (data.form !== undefined) {\n                form = data.form;\n            }\n            if (data.id !== undefined) {\n                item = data.id;\n            }\n            if (data._form !== undefined) {\n                form = data._form;\n            }\n            if (data._id !== undefined) {\n                item = data._id;\n            }\n            if (data._item !== undefined) {\n                item = data._item;\n            }\n\n            if (is_object(html)) { var tpl = $(html).outer(); } else { var tpl = html; }\n            // контроллер не обслуживает данный запрос - устарело\n            var url = \"/ajax/setdata/\" + form + \"/\" + item;\n            var res = null;\n            var param = { tpl: tpl, data: data };\n            param = base64_encode(JSON.stringify(param));\n            wbapp.postSync(url, {\n                data: param\n            }, function (data) {\n                if (ret == undefined || ret == false) {\n                    $(selector).after(data).remove();\n                    res = true;\n                } else {\n                    res = data;\n                }\n            });\n            return res;\n        }\n    }\n\n    wbapp.toast = function (title, text, params = {}) {\n        var target = '.content-toasts';\n        if (!$(document).find(target).length) {\n            $('body').prepend('<div class=\"content-toasts position-fixed t-0\" style=\"z-index:999999;right:0;\"></div>');\n        }\n\n        let options = {\n            'target': target,\n            'delay': 3000,\n        }\n\n        if (wbapp.template['wb.toast'] == undefined) {\n            var res = wbapp.getTpl(\"snippets\", \"toast\");\n            wbapp.tpl('wb.toast', {\n                html: res.result,\n                params: {}\n            });\n        }\n\n        let $tpl = $(wbapp.tpl('wb.toast').html);\n\n        if (params.target) options.target = params.target;\n        if (params.delay) options.delay = params.delay;\n        if (params.bgcolor) {\n            $tpl.addClass('bd-' + params.bgcolor);\n            $tpl.find('.toast-header').addClass('bg-' + params.bgcolor);\n        }\n        if (params.txcolor) {\n            $tpl.find('.toast-header h6').addClass('tx-' + params.txcolor).removeClass('tx-inverse');\n        }\n        $tpl.attr('data-delay', options.delay);\n\n        let toast = Ractive({\n            el: options.target,\n            append: true,\n            template: $tpl.outer(),\n            data: {\n                title: title,\n                text: text,\n                age: ''\n            }\n        });\n\n        $(document).find(options.target)\n            .find(\".toast:last-child\")\n            .toast('show')\n            .off('hidden.bs.toast')\n            .on('hidden.bs.toast', function (e) {\n                $(e.currentTarget).remove();\n            });\n    }\n\n\n    wbapp.formByObj = function (selector, data) {\n        var form = $(document).find(selector, 0);\n        $(form)[0].clear;\n        $.each(data, function (key, value) {\n            $(form).find(\"[name='\" + key + \"']\").val(value);\n        });\n    }\n\n    wbapp.objByForm = function (form) {\n        form = $(form);\n        let data = $(form).serializeJson();\n        return data;\n    }\n\n    wbapp.tplInit = function () {\n        if (!wbapp.template) wbapp.template = {};\n        if (wbapp.template['wb.modal'] == undefined) {\n            var res = wbapp.getTpl(\"snippets\", \"modal\");\n            wbapp.tpl('wb.modal', {\n                html: res.result,\n                params: {}\n            });\n        }\n        setTimeout(function () {\n            $(document).find(\"template\").each(function () {\n                var tid\n                if (tid == undefined && $(this).is(\"template[id]\")) tid = $(this).attr(\"id\");\n                if (tid == undefined) tid = $(this).parent().attr(\"id\");\n                if (tid == undefined && $(this).is(\"[data-target]\")) tid = $(this).attr(\"data-target\");\n                if (tid == undefined) {\n                    $(this).attr(\"id\", \"fe_\" + wbapp.newId());\n                    var tid = $(this).attr(\"id\");\n                }\n                tid = \"#\" + tid;\n\n                var params = [];\n                if ($(this).attr(\"data-params\") !== undefined) {\n                    try {\n                        params = wbapp.parseAttr($(this).attr(\"data-params\"));\n                        params['target'] = tid;\n                    } catch (error) { null }\n                }\n\n\n\n                let html = $(this).html();\n\n                html = html.replace(/<template\\b[^<]*(?:(?!<\\/template>)<[^<]*)*<\\/template>/gi, \"\");\n                html = str_replace('%7B%7B', '{{', html);\n                html = str_replace('%7D%7D', '}}', html);\n\n                $(this).removeAttr(\"data-params\");\n                if ($(this).attr(\"data-ajax\") !== undefined) {\n                    let prms = wbapp.parseAttr($(this).attr(\"data-ajax\"));\n                    params = array_merge(prms, params);\n                    wbapp.tpl(tid, {\n                        'html': html,\n                        'params': params\n                    });\n                    $(this).trigger(\"click\", tid);\n                } else {\n                    wbapp.tpl(tid, {\n                        \"html\": html,\n                        \"params\": params\n                    });\n                }\n\n                if (params.bind && params.render == 'client') {\n                    var profileMenu = Ractive({\n                        target: tid,\n                        template: wbapp.template[tid].html,\n                        data: () => { return wbapp.storage(params.bind); }\n                    });\n                    wbapp.render(tid, wbapp.storage(params.bind));\n                } else if (params.bind && params.render == 'server') {\n                    wbapp.storage(params.bind, params);\n                } else if (params._params && params._params.bind && params._params.render == 'server') {\n                    wbapp.storage(params._params.bind, params);\n                }\n                if ($(this).prop(\"visible\") == undefined) $(this).remove();\n            });\n            wbapp.wbappScripts();\n        }, 10);\n    }\n\n    wbapp.getForm = function (form, mode, data = {}) {\n        var res = wbapp.postSync(`/ajax/getform/${form}/${mode}`, data);\n        return res;\n    }\n\n    wbapp.getTpl = function (form, mode, data = {}) {\n        var res = wbapp.postSync(`/ajax/gettpl/${form}/${mode}`, data);\n        return res;\n    }\n\n\n    wbapp.tpl = function (tid, data = null) {\n        if (data == null && wbapp.template[tid] !== undefined) {\n            if (wbapp.template[tid].params !== undefined && wbapp.template[tid].params.locale !== undefined) {\n                let tpl = wbapp.template[tid].html;\n                let loc = wbapp.template[tid].params.locale;\n                $.each(loc, function (key, val) {\n                    tpl = str_replace('{{_lang.' + key + '}}', val, tpl);\n                });\n                wbapp.template[tid].html = tpl;\n            }\n            return wbapp.template[tid];\n        } else {\n            wbapp.template[tid] = data;\n        }\n    }\n\n    wbapp.render = function (tid, data) {\n        if (tid == undefined) return;\n        let params = wbapp.template[tid].params;\n        if (data == undefined && params.bind == undefined) data = {};\n        if (data == undefined) data = wbapp.storage(params.bind);\n        if (params.render == undefined) params.render = null; // для рендера не списковых данных\n        switch (params.render) {\n            case 'client':\n                wbapp.renderClient(params, data);\n                break;\n            case 'server':\n                wbapp.renderServer(params, data);\n                break;\n            case null:\n                new Ractive({\n                    'target': tid,\n                    'template': wbapp.template[tid].html,\n                    'data': () => { return data; }\n                });\n                break;\n        }\n        wbapp.lazyload();\n        wbapp.trigger('wb-render-done', tid, data);\n    }\n\n    wbapp.renderServer = function (params, data = {}) {\n        if (params.target !== undefined && params.target > '#' && $(document).find(params.target).length) {\n            //delete params.data;\n            delete params.bind;\n\n            params._tid = params.target;\n            wbapp.ajax(params, function (data) {\n                var inner = '<wb>' + data.data + '</wb>';\n                inner = $(inner).find(params.target).html();\n                $(params.target).html(inner);\n            });\n        }\n    }\n\n    wbapp.renderClient = function (params, data = {}) {\n        var tid;\n        var newbind = false;\n        if (tid == undefined && params._tid !== undefined) tid = params._tid;\n        if (tid == undefined && params.target !== undefined) tid = params.target;\n        if (params.target == undefined && tid !== undefined) params.target = tid;\n\n        /*\n        var that = params._event.target;\n        var tpl = $(that).parent();\n        if ($(that).is(\"template\")) tpl = $(that);\n        var tid = \"#\"+$(tpl).parent().attr(\"id\");\n        if (params.target !== undefined) tid = params.target;\n        */\n\n        if (wbapp.template[tid] == undefined) return;\n\n        if (params.from !== undefined && data[params.from] == undefined) {\n            let from = {};\n            from[params.from] = data;\n            data = from;\n        }\n\n\n        if (wbapp.bind[params.bind] == undefined) {\n            wbapp.bind[params.bind] = {};\n            newbind = tid;\n        }\n        var html = wbapp.template[tid].html;\n        wbapp.bind[params.bind][tid] = new Ractive({\n            target: params.target,\n            template: html,\n            data: () => {\n                return data\n            }\n        })\n        ///wbapp.storage(params.bind, data);\n        wbapp.template[tid].params = params;\n        var pagination = $(tid).find(\".pagination\");\n        if (pagination) {\n            let page = 1;\n            $(pagination).data(\"tpl\", tid);\n            if (params.page) page = params.page;\n            $(pagination).find(\".page-item\").removeClass(\"active\");\n            $(pagination).find(`[data-page=\"${page}\"]`).parent(\".page-item\").addClass(\"active\");\n        }\n\n        if (newbind) {\n            wbapp.bind[params.bind][tid].set(data);\n            $(document).on(\"bind-\" + params.bind, function (e, data) {\n                try {\n                    wbapp.bind[params.bind][tid].set(data);\n                } catch (error) {\n                    wbapp.bind[params.bind][tid].update(data);\n                }\n            })\n        }\n    }\n\n    wbapp.newId = function (separator, prefix) {\n        if (separator == undefined) {\n            separator = \"\";\n        }\n        var mt = explode(\" \", microtime());\n        var md = substr(str_repeat(\"0\", 2) + dechex(ceil(mt[0] * 10000)), -4);\n        var id = dechex(time() + rand(100, 999));\n        if (prefix !== undefined && prefix > \"\") {\n            id = prefix + separator + id + md;\n        } else {\n            id = \"id\" + id + separator + md;\n        }\n        return id;\n    }\n\n    wbapp.modalsInit = function () {\n        wbapp.modalZndx == undefined ? wbapp.modalZndx = 2000 : null;\n\n        $(document).undelegate(\".modal-header\", \"dblclick\");\n        $(document).delegate(\".modal-header\", \"dblclick\", function (event) {\n            var that = $(event.target);\n            $(that).closest(\".modal\").toggleClass(\"modal-fullscreen\");\n        });\n\n        if (document.modalDelegates == undefined) {\n            document.modalDelegates = true;\n            $(document).delegate(\".modal\", \"shown.bs.modal\", function () {\n                $('.modal[data-zidx]').each(function () {\n                    let max = $(this).attr('data-zidx') * 1;\n                    if (max > wbapp.modalZndx) wbapp.modalZndx = max;\n                })\n\n                if ($(this).parents('.modal')) {\n                    $(this).appendTo($(this).parents('.modal').parent());\n                }\n\n                var that = this;\n                if ($(that).find('.modal-content').css('position') == 'fixed') return;\n                $(that).find('.modal-content')\n                    //      .resizable({\n                    //        minWidth: 300,\n                    //        minHeight: 175,\n                    //        handles: 'n, e, s, w, ne, sw, se, nw',\n                    //      })\n                    .draggable({\n                        handle: '.modal-header',\n                        containment: \"body\"\n                    });\n\n                wbapp.modalZndx += 10;\n                if (!$(this).closest().is(\"body\")) {\n                    if ($(this).data(\"parent\") == undefined) $(this).data(\"parent\", $(this).closest());\n                    // нельзя переносить модальное окно, так как могут возникнуть проблемы с селектором!\n                    //$(this).appendTo(\"body\");\n                }\n                if ($(that).attr('data-zidx') == undefined) {\n                    $(that).css(\"z-index\", wbapp.modalZndx).attr('data-zidx', wbapp.modalZndx);\n                    if ($(that).attr(\"data-backdrop\") !== \"false\") {\n                        $(\".modal-backdrop:not([data-zidx])\").css(\"z-index\", (wbapp.modalZndx - 5)).attr('data-zidx', wbapp.modalZndx - 5);\n                    }\n                }\n                window.dispatchEvent(new Event('resize'));\n            });\n\n            $(document).delegate(\".modal\", \"DOMSubtreeModified\", function () {\n                if ($(this).find('.modal-content').height() > $(window).height() - 80) {\n                    $(this).addClass('h-100');\n                } else {\n                    $(this).removeClass('h-100');\n                }\n            })\n\n            $(document).delegate(\".modal\", 'hidden.bs.modal', function () {\n                let zndx = $(this).css(\"z-index\") * 1;\n                $(\".modal-backdrop[style*='z-index: \" + (zndx - 5) + \"']\").remove();\n            })\n\n            $(document).delegate(\".modal [data-dismiss]\", \"click\", function (event) {\n                event.preventDefault();\n                let zndx = $(this).attr(\"data-dismiss\") * 1;\n                let modal = $(document).find(\".modal[data-zidx='\" + $(this).attr(\"data-dismiss\") + \"']\");\n                modal.modal(\"hide\");\n               // $(document).find(\".modal-backdrop[data-dismiss='\" + (zndx - 5) + \"']\").remove();\n            });\n\n\n            $(document).delegate(\".modal\", \"hidden.bs.modal\", function (event) {\n                var that = this;\n                if ($(this).hasClass(\"removable\")) {\n                    $(that).modal(\"dispose\").remove();\n                } else {\n                    $(this).appendTo($(this).data(\"parent\"));\n                }\n            });\n        }\n\n\n        $(document).off(\"wb-ajax-done\");\n        $(document).on(\"wb-ajax-done\", function () {\n            wbapp.console(\"Trigger: wb-ajax-done\");\n            if (wbapp !== undefined) {\n                wbapp.tplInit();\n                wbapp.wbappScripts();\n                //wbapp.pluginsInit();\n                wbapp.lazyload();\n            }\n            if ($(\".modal.show:not(:visible),.modal[data-show=true]:not(:visible)\").length) $(\".modal.show:not(:visible),.modal[data-show=true]:not(:visible)\").modal(\"show\");\n            if ($.fn.tooltip) $('[data-toggle=\"tooltip\"]').tooltip();\n        });\n    }\n\n    wbapp.getModal = function (id = null) {\n        var modal = $(document).data(\"wbapp-modal\");\n        if (modal == undefined) {\n            var modal = wbapp.postSync(\"/ajax/gettpl/snippets/modal/\");\n            modal = $(\"<div>\" + modal.content + \"</div>\").find(\".modal\").clone();\n            $(document).data(\"wbapp-modal\", modal);\n        }\n        var zndx = wbapp.modalZndx * 1 + 10;\n        wbapp.modalZndx = zndx;\n        if (id !== null) $(modal).attr(\"id\", id);\n        if (zndx !== undefined) $(modal).data(\"zndx\", zndx).attr(\"style\", \"z-index:\" + zndx);\n        return $(modal).clone();\n    }\n\n    wbapp.ajaxSync = function (ajaxObjs, fn) {\n        if (!ajaxObjs) return;\n        wbapp.loading();\n        var data = [];\n        var ajaxCount = ajaxObjs.length;\n        if (fn == undefined) {\n            var fn = function (data) {\n                return data;\n            }\n        }\n        for (var i = 0; i < ajaxCount; i++) { //append logic to invoke callback function once all the ajax calls are completed, in success handler.\n            try { ajaxObjs[i].data.__token = wbapp._session.token; } catch (error) { null }\n            $.ajax(ajaxObjs[i]).done(function (res) {\n                ajaxCount--;\n                if (ajaxObjs.length > 0) {\n                    data.push(res);\n                } else {\n                    data = res;\n                }\n            }).fail(function () {\n                wbapp.unloading();\n                ajaxCount--;\n                if (ajaxObjs.length > 0) {\n                    data.push(false);\n                } else {\n                    data = false;\n                }\n            }); //make ajax call\n        };\n        while (ajaxCount > 0) {\n            // wait all done\n        }\n        wbapp.unloading();\n        return fn(data);\n    }\n\n\n    wbapp.getSync = function (url, data = {}) {\n        return wbapp.ajaxSync([{\n            url: url,\n            type: 'GET',\n            async: true,\n            data: data\n        }])[0];\n    }\n\n    wbapp.postSync = function (url, data = {}) {\n        return wbapp.ajaxSync([{\n            url: url,\n            type: 'POST',\n            async: false,\n            data: data\n        }])[0];\n    }\n\n    wbapp.session = function (e) {\n        if (wbapp._session == undefined) wbapp._session = wbapp.postSync(\"/ajax/getsess/\");\n        wbapp.trigger('wb-getsess', e, wbapp._session);\n        return wbapp._session;\n    }\n\n    wbapp.settings = function (e) {\n        if (wbapp._settings == undefined) wbapp._settings = wbapp.postSync(\"/ajax/getsett/\");\n        wbapp.trigger('wb-getsett', e, wbapp._settings);\n        return wbapp._settings;\n    }\n\n    wbapp.console = function(text) {\n        if (wbapp._settings == undefined || wbapp._settings.devmode == 'on') {\n            console.log(text);\n        }\n    }\n\n    wbapp.loadScripts = function (scripts = [], trigger = null, func = null) {\n        if (wbapp.loadedScripts == undefined) wbapp.loadedScripts = [];\n        let ready = [];\n        var stop = 0;\n        var count = scripts.length;\n        scripts.forEach(function (src, i) {\n            //    let name = src.split(\"/\");\n            //    name = name[name.length-1];\n            if (wbapp.devmode > 0 && src.indexOf('?') == -1) src += '?' + wbapp.devmode;\n            let name = src;\n            if (wbapp.loadedScripts.indexOf(src) !== -1) {\n                wbapp.console(\"Script loaded: \" + name);\n                stop +=1;\n                if (stop >= count) {\n                    if (trigger > '') {\n                        $(document).find(\"script#\" + trigger + \"-remove\").remove();\n                        $(document).trigger(trigger);\n                    }\n                    if (func !== null) return func(scripts);\n                }\n            } else {\n                let script = document.createElement('script');\n                script.src = src;\n                script.async = false;\n                script.onload = function () {\n                    wbapp.loadedScripts.push(name);\n                    wbapp.console(\"Script loaded: \" + name);\n                    stop +=1;\n                    if (stop >= count) {\n                        if (trigger > '') {\n                            $(document).find(\"script#\" + trigger + \"-remove\").remove();\n                            $(document).trigger(trigger);\n                        }\n                        if (func !== null) return func(scripts);\n                    }\n                }\n                document.head.appendChild(script);\n            }\n        });\n    }\n\n    wbapp.loadStyles = async function (styles = [], trigger = null, func = null) {\n        if (wbapp.loadedStyles == undefined) wbapp.loadedStyles = [];\n        var i = 0;\n        styles.forEach(function (src) {\n            if (wbapp.loadedStyles.indexOf(src) !== -1) {\n                i++;\n                if (i >= styles.length) {\n                    if (func !== null) return func(styles);\n                    if (trigger !== null) {\n                        wbapp.console(\"Trigger: \" + trigger);\n                        $(document).find(\"script#\" + trigger + \"-remove\").remove();\n                        $(document).trigger(trigger);\n                    }\n                }\n            } else {\n                if (wbapp.devmode && src.indexOf('?') == -1) src += '?' + wbapp.devmode;\n                var style = document.createElement('link');\n                wbapp.loadedStyles.push(src);\n                style.href = src;\n                style.rel = \"stylesheet\";\n                style.type = \"text/css\";\n                style.async = true;\n                style.onload = function () {\n                    i++;\n                    if (i >= styles.length) {\n                        if (func !== null) return func(styles);\n                        if (trigger !== null) {\n                            $(document).find(\"script#\" + trigger + \"-remove\").remove();\n                            $(document).trigger(trigger);\n                            wbapp.console(\"Trigger: \" + trigger);\n                        }\n                    }\n                }\n                document.head.appendChild(style);\n            }\n        });\n    }\n\n    wbapp.loadPreload = async function (trigger = null, func = null) {\n        let preloads = {};\n        $('link[rel=preload][as][href]').each(function () {\n            if (preloads[$(this).attr('as')] == undefined) { preloads[$(this).attr('as')] = []; }\n            preloads[$(this).attr('as')].push($(this).attr('href'))\n        });\n        let preload_max = 0;\n        let preload_count = 0;\n        if (preloads.script.length > 0) preload_max++;\n        if (preloads.style.length > 0) preload_max++;\n        let preload_check = () => {\n            if (preload_count == preload_max) {\n                if (func !== null) return func(styles);\n                if (trigger !== null) {\n                    $(document).trigger(trigger);\n                    wbapp.console(\"Trigger: \" + trigger);\n                }\n                wbapp.trigger('ready-all');\n            }\n        }\n        wbapp.loadScripts(preloads.script, 'preloaded-js', () => { preload_count++; preload_check() });\n        wbapp.loadStyles(preloads.style, 'preloaded-css', () => { preload_count++; preload_check() });\n    }\n\n    wbapp.on = async function (trigger, func = null) {\n        if (func == null) func = () => { return true; }\n        $(document).on(trigger, func);\n    }\n\n    wbapp.trigger = function (trigger, event = null, data = null) {\n        wbapp.console('Trigger: ' + trigger);\n        if (event == null) {\n            $(document).trigger(trigger, data);\n        } else {\n            $(document).trigger(trigger, event, data);\n            //$(event).trigger(trigger, data);\n        }\n    }\n\n\n    wbapp.furl = function (str) {\n        str = str.replace(/[^\\/а-яА-Яa-zA-Z0-9_-]{1,}/gm, \"_\");\n        str = str.replace(/[__]{1,}/gm, \"_\");\n        str = wbapp.transilt(str);\n        return str;\n    }\n\n    wbapp.transilt = function (word) {\n        let answer = \"\";\n        let a = {};\n        let i;\n        a[\"Ё\"] = \"YO\"; a[\"Й\"] = \"I\"; a[\"Ц\"] = \"TS\"; a[\"У\"] = \"U\"; a[\"К\"] = \"K\"; a[\"Е\"] = \"E\"; a[\"Н\"] = \"N\"; a[\"Г\"] = \"G\"; a[\"Ш\"] = \"SH\"; a[\"Щ\"] = \"SCH\"; a[\"З\"] = \"Z\"; a[\"Х\"] = \"H\"; a[\"Ъ\"] = \"'\";\n        a[\"ё\"] = \"yo\"; a[\"й\"] = \"i\"; a[\"ц\"] = \"ts\"; a[\"у\"] = \"u\"; a[\"к\"] = \"k\"; a[\"е\"] = \"e\"; a[\"н\"] = \"n\"; a[\"г\"] = \"g\"; a[\"ш\"] = \"sh\"; a[\"щ\"] = \"sch\"; a[\"з\"] = \"z\"; a[\"х\"] = \"h\"; a[\"ъ\"] = \"'\";\n        a[\"Ф\"] = \"F\"; a[\"Ы\"] = \"I\"; a[\"В\"] = \"V\"; a[\"А\"] = \"a\"; a[\"П\"] = \"P\"; a[\"Р\"] = \"R\"; a[\"О\"] = \"O\"; a[\"Л\"] = \"L\"; a[\"Д\"] = \"D\"; a[\"Ж\"] = \"ZH\"; a[\"Э\"] = \"E\";\n        a[\"ф\"] = \"f\"; a[\"ы\"] = \"i\"; a[\"в\"] = \"v\"; a[\"а\"] = \"a\"; a[\"п\"] = \"p\"; a[\"р\"] = \"r\"; a[\"о\"] = \"o\"; a[\"л\"] = \"l\"; a[\"д\"] = \"d\"; a[\"ж\"] = \"zh\"; a[\"э\"] = \"e\";\n        a[\"Я\"] = \"Ya\"; a[\"Ч\"] = \"CH\"; a[\"С\"] = \"S\"; a[\"М\"] = \"M\"; a[\"И\"] = \"I\"; a[\"Т\"] = \"T\"; a[\"Ь\"] = \"'\"; a[\"Б\"] = \"B\"; a[\"Ю\"] = \"YU\";\n        a[\"я\"] = \"ya\"; a[\"ч\"] = \"ch\"; a[\"с\"] = \"s\"; a[\"м\"] = \"m\"; a[\"и\"] = \"i\"; a[\"т\"] = \"t\"; a[\"ь\"] = \"'\"; a[\"б\"] = \"b\"; a[\"ю\"] = \"yu\";\n\n        for (i = 0; i < word.length; ++i) {\n\n            answer += a[word[i]] === undefined ? word[i] : a[word[i]];\n        }\n        return answer;\n    }\n\n    wbapp.check_email = function (email) {\n        if (email.match(/^([a-z0-9_-]+\\.)*[a-z0-9_-]+@[a-z0-9_-]+(\\.[a-z0-9_-]+)*\\.[a-z]{2,6}$/i)) {\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n    var array_column = function (list, column, indice) {\n        var result, key;\n        if (list.length) {\n            if (typeof indice !== \"undefined\") {\n                result = {};\n\n                for (key in list)\n                    if (typeof list[key][column] !== 'undefined' && typeof list[key][indice] !== 'undefined')\n                        result[list[key][indice]] = list[key][column];\n            } else {\n                result = [];\n\n                for (key in list)\n                    if (typeof list[key][column] !== 'undefined')\n                        result.push(list[key][column]);\n            }\n        }\n        return result;\n    }\n\n    var alive = setInterval(function () {\n        wbapp.alive();\n    }, 84600);\n\n    wbapp.init = function () {\n        wbapp.wbappScripts();\n        wbapp.tplInit();\n        wbapp.modalsInit();\n    }\n\n    wbapp.print = function (pid) {\n        var divToPrint = document.getElementById(pid);\n        var newWin = window.open('', 'Print-Window');\n        newWin.document.open();\n        newWin.document.write('<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"/engine/lib/bootstrap/css/bootstrap.min.css\"></head><body onload=\"window.print()\">' + divToPrint.innerHTML + '</body></html>');\n        newWin.document.close();\n        setTimeout(function () { newWin.close(); }, 10);\n    }\n\n\n    function is_object(val) { return val instanceof Object; }\n    function is_callable(t, n, o) { var e = \"\", r = {}, i = \"\"; if (\"string\" == typeof t) r = window, e = i = t; else { if (!(t instanceof Array && 2 === t.length && \"object\" == typeof t[0] && \"string\" == typeof t[1])) return !1; r = t[0], i = t[1], e = (r.constructor && r.constructor.name) + \"::\" + i } return !(!n && \"function\" != typeof r[i]) && (o && (window[o] = e), !0) }\n\n    \n\nvar loadPhpjs = function () {\n    if (_tmpphp == false) {\n        _tmpphp = true;\n        let phpjs = document.createElement('script');\n        phpjs.src = `/engine/js/php.js`;\n        phpjs.async = false;\n        phpjs.defer = true;\n        phpjs.onload = function () {\n            wbapp.start();\n        }\n        document.head.appendChild(phpjs);\n    }\n}\n\nvar loadJquery = function () {\n    if (_tmpjq == false) {\n        _tmpjq = true;\n        let jquery = document.createElement('script');\n        jquery.src = '/engine/js/jquery.min.js';\n        jquery.async = false;\n        jquery.defer = true;\n        jquery.onload = function () {\n            wbapp.start();\n        }\n        document.head.appendChild(jquery);\n    }\n\n}\n\n"],"file":"wbapp.dev.js"}